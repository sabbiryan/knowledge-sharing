(function(n){function r(){var r,f,e,o;if(t.valid()){if(r=t.serializeFormToObject(),r.permissions=[],f=n("input[name='permission']:checked:visible"),f)for(e=0;e<f.length;e++)o=n(f[e]),r.permissions.push(o.val());abp.ui.setBusy(t);u.update(r).done(function(){i.modal("hide");location.reload(!0)}).always(function(){abp.ui.clearBusy(i)})}}var u=abp.services.app.role,i=n("#RoleEditModal"),t=n("form[name=RoleEditForm]");t.closest("div.modal-content").find(".save-button").click(function(n){n.preventDefault();r()});t.find("input").on("keypress",function(n){n.which===13&&(n.preventDefault(),r())});n.AdminBSB.input.activate(t);i.on("shown.bs.modal",function(){t.find("input[type=text]:first").focus()})})(jQuery);